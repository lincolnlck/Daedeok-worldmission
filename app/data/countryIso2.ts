/**
 * 국가명(키) → ISO 3166-1 alpha-2 코드 (소문자)
 * flag-icons 클래스용: <span class="fi fi-{iso2}"></span>
 * resolveCountryKey()로 얻은 키를 이 맵에 넣어 사용합니다.
 */
export const countryKeyToIso2: Record<string, string> = {
  // 한국/북한/중국권
  한국: "kr",
  대한민국: "kr",
  남한: "kr",
  북한: "kp",
  조선: "kp",
  조선민주주의인민공화국: "kp",
  중국: "cn",
  중화인민공화국: "cn",
  홍콩: "hk",
  마카오: "mo",
  대만: "tw",
  타이완: "tw",
  // 동남아/남아시아
  태국: "th",
  타이: "th",
  베트남: "vn",
  라오스: "la",
  캄보디아: "kh",
  미얀마: "mm",
  버마: "mm",
  말레이시아: "my",
  싱가포르: "sg",
  인도네시아: "id",
  필리핀: "ph",
  브루나이: "bn",
  동티모르: "tl",
  티모르레슈티: "tl",
  인도: "in",
  네팔: "np",
  스리랑카: "lk",
  파키스탄: "pk",
  방글라데시: "bd",
  부탄: "bt",
  몰디브: "mv",
  아프가니스탄: "af",
  히말라야: "np",
  // 중동/중앙아시아
  요르단: "jo",
  사우디: "sa",
  사우디아라비아: "sa",
  UAE: "ae",
  아랍에미리트: "ae",
  아랍에미리트연합: "ae",
  카타르: "qa",
  쿠웨이트: "kw",
  오만: "om",
  바레인: "bh",
  예멘: "ye",
  이란: "ir",
  이라크: "iq",
  시리아: "sy",
  레바논: "lb",
  이스라엘: "il",
  팔레스타인: "ps",
  터키: "tr",
  튀르키예: "tr",
  조지아: "ge",
  아르메니아: "am",
  아제르바이잔: "az",
  카자흐스탄: "kz",
  우즈베키스탄: "uz",
  키르기스스탄: "kg",
  타지키스탄: "tj",
  투르크메니스탄: "tm",
  // 유럽
  러시아: "ru",
  우크라이나: "ua",
  벨라루스: "by",
  영국: "gb",
  그레이트브리튼: "gb",
  프랑스: "fr",
  독일: "de",
  이탈리아: "it",
  스페인: "es",
  포르투갈: "pt",
  네덜란드: "nl",
  홀란드: "nl",
  벨기에: "be",
  스위스: "ch",
  오스트리아: "at",
  스웨덴: "se",
  노르웨이: "no",
  덴마크: "dk",
  핀란드: "fi",
  아이슬란드: "is",
  폴란드: "pl",
  체코: "cz",
  헝가리: "hu",
  루마니아: "ro",
  불가리아: "bg",
  그리스: "gr",
  크로아티아: "hr",
  세르비아: "rs",
  보스니아: "ba",
  "보스니아 헤르체고비나": "ba",
  알바니아: "al",
  북마케도니아: "mk",
  마케도니아: "mk",
  슬로베니아: "si",
  슬로바키아: "sk",
  아일랜드: "ie",
  룩셈부르크: "lu",
  몰타: "mt",
  키프로스: "cy",
  리투아니아: "lt",
  라트비아: "lv",
  에스토니아: "ee",
  // 아메리카
  미국: "us",
  미합중국: "us",
  캐나다: "ca",
  멕시코: "mx",
  브라질: "br",
  아르헨티나: "ar",
  칠레: "cl",
  페루: "pe",
  콜롬비아: "co",
  베네수엘라: "ve",
  볼리비아: "bo",
  에콰도르: "ec",
  파라과이: "py",
  우루과이: "uy",
  파나마: "pa",
  코스타리카: "cr",
  과테말라: "gt",
  온두라스: "hn",
  니카라과: "ni",
  엘살바도르: "sv",
  도미니카공화국: "do",
  "도미니카 공화국": "do",
  도미니카: "do",
  // 아프리카
  남아공: "za",
  남아프리카: "za",
  "남아프리카 공화국": "za",
  케냐: "ke",
  우간다: "ug",
  탄자니아: "tz",
  르완다: "rw",
  부룬디: "bi",
  에티오피아: "et",
  수단: "sd",
  남수단: "ss",
  나이지리아: "ng",
  가나: "gh",
  카메룬: "cm",
  세네갈: "sn",
  코트디부아르: "ci",
  아이보리코스트: "ci",
  콩고민주공화국: "cd",
  DR콩고: "cd",
  콩고공화국: "cg",
  "콩고 민주 공화국": "cd",
  "콩고 공화국": "cg",
  모리셔스: "mu",
  모로코: "ma",
  튀니지: "tn",
  알제리: "dz",
  이집트: "eg",
  리비아: "ly",
  마다가스카르: "mg",
  모잠비크: "mz",
  짐바브웨: "zw",
  잠비아: "zm",
  나미비아: "na",
  보츠와나: "bw",
  앙골라: "ao",
  피지: "fj",
  // 오세아니아
  호주: "au",
  오스트레일리아: "au",
  뉴질랜드: "nz",
};

/** countryCenters 등에만 있고 alias에 없는 국가들 (자동생성 파일 키 기준) */
const moreCountryIso2: Record<string, string> = {
  기니비사우: "gw",
  누벨칼레도니: "nc",
  그레나다: "gd",
  생바르텔레미: "bl",
  아메리칸사모아: "as",
  니우에: "nu",
  쿡제도: "ck",
  토켈라우: "tk",
  괌: "gu",
  북마리아나제도: "mp",
  미크로네시아: "fm",
  마셜제도: "mh",
  팔라우: "pw",
  솔로몬제도: "sb",
  바누아투: "vu",
  사모아: "ws",
  키리바시: "ki",
  통가: "to",
  투발루: "tv",
  나우루: "nr",
  파푸아뉴기니: "pg",
  동티모르: "tl",
  말리: "ml",
  니제르: "ne",
  차드: "td",
  수리남: "sr",
  가이아나: "gy",
  프랑스령기아나: "gf",
  에스와티니: "sz",
  레소토: "ls",
  말라위: "mw",
  감비아: "gm",
  기니: "gn",
  시에라리온: "sl",
  라이베리아: "lr",
  토고: "tg",
  베냉: "bj",
  부르키나파소: "bf",
  적도기니: "gq",
  가봉: "ga",
  중앙아프리카공화국: "cf",
  콩고민주공화국: "cd",
  지부티: "dj",
  소말리아: "so",
  에리트레아: "er",
  코모로: "km",
  세이셸: "sc",
  카보베르데: "cv",
  상투메프린시페: "st",
  모리타니: "mr",
  서사하라: "eh",
};

const fullMap: Record<string, string> = { ...countryKeyToIso2, ...moreCountryIso2 };

/**
 * 국가 키( resolveCountryKey 결과 )를 ISO 3166-1 alpha-2 소문자로 변환.
 * 국기 없음이면 null.
 */
export function getCountryIso2(countryKey: string): string | null {
  if (!countryKey || typeof countryKey !== "string") return null;
  const trimmed = countryKey.trim();
  return fullMap[trimmed] ?? fullMap[trimmed.replace(/\s+/g, " ")] ?? null;
}
